var B=Object.defineProperty;var $=(i,e,t)=>e in i?B(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var h=(i,e,t)=>$(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const a=innerHeight-30,l=innerWidth-30,k=800,q=267;let g={x:6,y:70};const K=400,z=1e3,V=-50,P=1e3,y=a-80,x=150,v=130,H=60,J=100,Q=80,Z=120,S=80,R=120,p=(i,e)=>Math.floor(i+Math.random()*(e-i+1));function ee(i,e){return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y}function te(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function ie(i){const t=200-i[0].x;for(let s=0;s<i.length;s++)i[s].x+=t}class T{constructor(e,t,s,n=p(K,z)){h(this,"x");h(this,"y");h(this,"width");h(this,"height");h(this,"img");h(this,"hasObstacle");h(this,"hasCoins");this.x=e,this.y=t,this.width=n,this.height=s,this.img=null,this.hasObstacle=!1,this.hasCoins=!1}draw(e){this.img=new Image,this.img.src="./platform2.png",e.drawImage(this.img,this.x,this.y-20,this.width,this.height)}}let d=[];const _=()=>{let i=new T(V,y,x,P),e=new T(i.x+i.width+v,y,x,P),t=new T(e.x+e.width+v,y,x,P);d.push(i,e,t)};function se(){const i=d[d.length-1],e=i?i.x+i.width+v:10;let t=new T(e,y,x);d.push(t)}const he=()=>{d.length>=5&&d.shift()};function ne(){d=[]}class I{constructor(e,t,s,n,o){h(this,"x");h(this,"y");h(this,"width");h(this,"height");h(this,"type");this.x=e,this.y=t,this.width=s,this.height=n,this.type=o}}class oe extends I{constructor(t,s,n,o){super(t,s,n,o,"car");h(this,"img");h(this,"type");this.img=new Image,this.img.src="./car.png",this.type="car"}draw(t){t.drawImage(this.img,this.x,this.y,this.width,this.height)}update(){this.x>400?this.x-=g.x:this.x-=g.x+2}handleCollision(t){return console.log(t.hasPower),!0}}class re extends I{constructor(t,s,n,o){super(t,s,n,o,"bomb");h(this,"img");h(this,"type");this.img=new Image,this.img.src="./bomb.png",this.type="bomb"}draw(t){t.drawImage(this.img,this.x,this.y,this.width,this.height)}update(){this.x-=g.x}handleCollision(t){return console.log(t.hasPower),!0}}const L=[{x:0,y:0},{x:240,y:0},{x:480,y:0},{x:720,y:0},{x:0,y:240},{x:240,y:240},{x:480,y:240},{x:720,y:240}];class ae extends I{constructor(t,s,n,o){super(t,s,n,o,"insect");h(this,"img");h(this,"frameIndex");h(this,"type");h(this,"frameThreshold");h(this,"frameCounter");this.img=new Image,this.img.src="./butterfly.png",this.frameIndex=0,this.frameThreshold=5,this.frameCounter=0,this.type="insect"}draw(t){const s=L[this.frameIndex];t.drawImage(this.img,s.x,s.y,240,240,this.x,this.y,this.width,this.height),this.frameCounter++,this.frameCounter>=this.frameThreshold&&(this.frameCounter=0,this.frameIndex++,this.frameIndex>=L.length&&(this.frameIndex=0))}update(){this.x-=g.x}handleCollision(t){return console.log("handle collsion with insect"),t.increaseFrogCount(),!0}}const ce=["shield","magnet","speed","jump boost"];class le extends I{constructor(t,s,n,o,c){super(t,s,n,o,"power");h(this,"img");h(this,"type");h(this,"powerTypeNum");h(this,"powerType");h(this,"powerUpEndTime");this.powerTypeNum=c,this.img=new Image,this.type="power",this.powerType=ce[c],this.powerUpEndTime=0}draw(t){this.powerTypeNum==1?(this.powerType="shield",this.img.src="./shield.png"):this.powerTypeNum==2?(this.powerType="magnet",this.img.src="./magnet.png"):this.powerTypeNum==3?(this.powerType="speed",this.img.src="./speed.png"):this.powerTypeNum==4&&(this.powerType="jump boost",this.img.src="./shoes.png"),this.img.onload=()=>{t.drawImage(this.img,this.x,this.y,this.width,this.height)},this.img.complete&&t.drawImage(this.img,this.x,this.y,this.width,this.height)}update(){this.x-=g.x}handleCollision(t){return console.log("do this when collides with powerup"),t.hasPower||(t.hasPower=this.powerType,t.timeForPower()),!0}}let f=[];function de(){d.forEach(i=>{if(!i.hasObstacle&&i!==d[0]){const e=i.x+p(i.width/6,2*i.width/3),t=i.y-p(100,200);let s,n;const o=Math.random();if(o<.2)n="car",s=new oe(e,i.y-H,J,H);else if(o<.5)n="bomb",s=new re(e,t,Z,Q);else if(o<.8)n="insect",s=new ae(e,t,R,S);else{n="power";const c=p(1,4);s=new le(e,t,R,S,c)}s.type=n,f.push(s),i.hasObstacle=!0,console.log(`Added ${s} obstacle at (${e}, ${t})`)}})}function ge(){f.forEach(i=>{i.update()})}function me(i){f.forEach(e=>{e.draw(i)})}function ue(){f=[]}function fe(i){i.clearRect(0,0,l,a);const e=new Image;e.onload=()=>{i.drawImage(e,0,0,l,a)},e.src="./start.jpg",i.fillStyle="white",i.font="30px Arial",i.textAlign="center",i.fillText("Welcome to Your Game",l/2,a/2-50)}function pe(i){i.clearRect(0,0,l,a);const e=new Image;e.onload=()=>{i.drawImage(e,0,0,l,a)},e.src="./end.jpg"}function we(i,e){i.font="bold 40px Arial",i.fillStyle="black",i.textAlign="center",i.fillText(`Active Power-up: ${e}`,l/2,30)}const M=new Audio("./jump.wav"),j=new Audio("./bomb.wav");class D{constructor(e,t){h(this,"frogs");h(this,"game");h(this,"spriteWidth");h(this,"spriteHeight");h(this,"frameX");h(this,"frameY");h(this,"spritePace");h(this,"jumpHeight");h(this,"jumpDuration");h(this,"spacePressed");h(this,"spaceReleasedTimeout");h(this,"hasPower");h(this,"powerUpEndTime");h(this,"isShieldActive");h(this,"isMagnetActive");h(this,"score");this.game=e,this.spriteWidth=k/12,this.spriteHeight=q/4,this.frameX=1,this.frameY=0,this.spritePace=4,this.jumpHeight=20,this.jumpDuration=3e3,this.spacePressed=!1,this.spaceReleasedTimeout=null,this.hasPower=null,this.powerUpEndTime=0,this.isShieldActive=!1,this.isMagnetActive=!1,this.score=0,this.frogs=[];for(let s=0;s<t;s++)this.frogs.push({x:200,y:a-this.game.groundHeight-50-s*20,width:64,height:64,isOnGround:!0,speedY:0,alive:!0});document.addEventListener("keydown",s=>this.handleKeyDown(s)),document.addEventListener("keyup",s=>this.handleKeyUp(s)),document.addEventListener("touchstart",()=>{this.jump()})}update(e){this.frogs.length!==0&&(this.frogs.forEach(t=>{(t.y>a||t.alive==!1)&&(te(this.frogs,t),console.log("one frog died"),console.log(this.frogs.length))}),this.frogs.length>0&&ie(this.frogs),this.handlePowerUps(),this.frogs.forEach(t=>{if(t.alive){t.y+=t.speedY;let s=!1;e.forEach(n=>{t.y+t.height>=n.y&&t.y+t.height<=n.y+20&&t.x+t.width-10>=n.x&&t.x<=n.x+n.width+10&&(s=!0,t.speedY=10,t.y>a-20?(t.speedY+=this.game.gravity,console.log("game over")):t.y=n.y-t.height)}),s?t.isOnGround=!0:(t.speedY+=this.game.gravity,t.isOnGround=!1)}}))}draw(e,t){this.frogs.forEach(s=>{s.alive&&(s.isOnGround?this.frameY=0:this.frameY=1,e.drawImage(t,this.spriteWidth*this.frameX,this.spriteHeight*this.frameY,this.spriteWidth,this.spriteHeight,s.x,s.y,this.spriteWidth,this.spriteHeight),this.game.gameFrame%this.spritePace===0&&(this.frameX<11?this.frameX++:this.frameX=0))}),this.hasPower&&we(e,this.hasPower)}jump(){this.frogs.forEach(e=>{e.isOnGround&&(e.speedY=-this.jumpHeight,e.isOnGround=!1,M.currentTime=0,M.play())})}increaseFrogCount(){const e=this.frogs[this.frogs.length-1];this.frogs.push({x:e.x-50,y:e.y,width:64,height:64,isOnGround:!0,speedY:0,alive:!0}),console.log(`Frog count increased to ${this.frogs.length}`)}decreaseFrogCount(){this.frogs.length>1&&!this.isShieldActive&&this.frogs.pop(),console.log(`Frog count decreased to ${this.frogs.length}`)}handleKeyDown(e){e.code==="Space"&&!this.spacePressed&&(this.spacePressed=!0,this.frameY=1,this.jump(),this.spaceReleasedTimeout&&(clearTimeout(this.spaceReleasedTimeout),this.spaceReleasedTimeout=null))}handleKeyUp(e){e.code==="Space"&&(this.spacePressed=!1,this.spaceReleasedTimeout=window.setTimeout(()=>{this.frameY=0,this.spaceReleasedTimeout=null},this.jumpDuration))}checkCollision(e){this.frogs.forEach(t=>{if(t.alive&&ee(t,e)){const s=f.indexOf(e);s>-1&&f.splice(s,1),(e.type=="car"||e.type=="bomb")&&(this.isShieldActive||(t.alive=!1)),e.type=="bomb"&&(j.currentTime=0,j.play()),e.type=="insect"&&this.increaseFrogCount(),e.type=="power"&&e.handleCollision(this)}})}handlePowerUps(){this.hasPower==="speed"&&Date.now()<this.powerUpEndTime?g.x=8:this.hasPower==="jump boost"&&Date.now()<this.powerUpEndTime?this.jumpHeight=30:this.hasPower==="shield"&&Date.now()<this.powerUpEndTime?(console.log("shield is on"),this.isShieldActive=!0):this.hasPower==="magnet"&&Date.now()<this.powerUpEndTime?(console.log("magnet is on"),this.isMagnetActive=!0):(this.jumpHeight=20,this.isShieldActive=!1,this.jumpDuration=3e3,g.x=6,this.hasPower=null,this.isMagnetActive=!1)}timeForPower(){this.powerUpEndTime=Date.now()+5e3}}const ye=(i,e,t)=>{const s=document.getElementById(i),n=s.getContext("2d");return s.width=e,s.height=t,{canvas:s,ctx:n}};class xe{constructor(e,t,s,n){h(this,"canvas");h(this,"ctx");h(this,"x");h(this,"y");h(this,"img");this.canvas=e,this.ctx=n,this.x=t,this.y=s,this.img=new Image,this.img.src="./bg2.jpg"}draw(){this.ctx.drawImage(this.img,this.x,this.y,this.canvas.width,a),this.ctx.drawImage(this.img,this.x+l,this.y,l,a)}update(){this.draw(),this.x-=g.x,this.x<=-l&&(this.x=0)}}const G=[{x:7,y:7,width:129,height:130},{x:145,y:4,width:140,height:133},{x:269,y:7,width:91,height:136},{x:48,y:158,width:61,height:145},{x:141,y:158,width:74,height:136},{x:237,y:158,width:118,height:136}];class Te{constructor(e,t,s,n,o){h(this,"x");h(this,"y");h(this,"height");h(this,"width");h(this,"value");h(this,"ctx");h(this,"vx");h(this,"vy");h(this,"frameIndex");h(this,"img");h(this,"frameThreshold");h(this,"frameCounter");h(this,"type");this.x=t,this.y=s,this.width=n,this.height=o,this.ctx=e,this.value=1,this.vx=g.x,this.vy=0,this.img=new Image,this.img.src="./coin.png",this.frameIndex=0,this.frameThreshold=5,this.frameCounter=0,this.type="coin"}draw(){const e=G[this.frameIndex];this.ctx.drawImage(this.img,e.x,e.y,e.width,e.height,this.x,this.y,this.width,this.height),this.frameCounter++,this.frameCounter>=this.frameThreshold&&(this.frameCounter=0,this.frameIndex++,this.frameIndex>=G.length&&(this.frameIndex=0))}update(e){if(e.isMagnetActive&&this.x>0&&this.x<l){let s=e.frogs[0].x-this.x,n=e.frogs[0].y-this.y,o=Math.sqrt(s*s+n*n);if(o>0){let c=s/o,w=n/o;this.x+=c*10,this.y+=w*10}}else this.x-=g.x}detectCollision(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}}let u=[];function Ie(i,e){d.forEach((t,s)=>{const n=s%3==0;if(!t.hasCoins&&t!==d[0]&&n){let o=t.x+p(t.width/6,2*t.width/3),c=t.y-p(100,200),w=30,A=40;for(let F=0;F<e;F++){o+=w,c-=A;const W=40,X=40,N=new Te(i,o,c,W,X);u.push(N),w+=5,A+=5}t.hasCoins=!0}})}function Pe(i){u.forEach(e=>{e.update(i)})}function ve(){u.forEach(i=>{i.draw()})}function Ce(i){for(let e=u.length-1;e>=0;e--){const t=u[e];i.frogs.forEach(s=>{t.detectCollision(s)&&(console.log("Collision detected with coin!"),i.score+=1,u.splice(e,1),console.log(`score:${i.score}`))})}}function be(){u=[]}const E={gameFrame:0,gravity:.8,groundHeight:80},{canvas:Ee,ctx:r}=ye("canvas1",l,a),U=new Image;U.src="./frog-sheet.png";const Oe=new Image;Oe.src="../startimage.jpg";const Y=new xe(Ee,0,0,r);let m=new D(E,1),C=!1;_();const b=document.querySelector("#reset-button");function O(){if(C){pe(r),b.style.display="block";return}E.gameFrame++,r.clearRect(0,0,l,a),Y.update(),Y.draw(),Se(),d.forEach(i=>{i.draw(r),i.x-=g.x,i.x+i.width<0&&se()}),he(),de(),ge(),me(r),Ie(r,3),Pe(m),ve(),Ce(m),m.update(d),m.draw(r,U),f.forEach(i=>{m.checkCollision(i),m.frogs.some(e=>e.alive)||(C=!0)}),requestAnimationFrame(O)}function Ae(){r.clearRect(0,0,l,a),r.fillStyle="blue",r.rect(20,20,500,500),C=!1,be(),ne(),ue(),m=new D(E,1),_()}function Fe(){Ae(),O()}function He(){fe(r);const i=document.querySelector("#start-button");i.addEventListener("click",()=>{i.style.display="none",O()}),b.addEventListener("click",()=>{b.style.display="none",Fe()})}He();function Se(){r.fillStyle="black",r.font="bold 30px Arial",r.fillText(`Score: ${m.score}`,100,80),r.fillText(`Frog: ${m.frogs.length}`,100,120)}
