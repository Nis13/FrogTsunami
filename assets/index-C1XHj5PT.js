var Q=Object.defineProperty;var Z=(i,t,e)=>t in i?Q(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>Z(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const c=innerHeight-30,a=innerWidth-30,ee=800,te=267;let d={x:6,y:70};const ie=400,se=1e3,he=-50,O=1e3,T=c-80,S=150,E=130,p=60,C=100,ne=80,re=120,G=80,L=120,I=(i,t)=>Math.floor(i+Math.random()*(t-i+1));function H(i,t){return t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.y+t.height>i.y}function b(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function oe(i){const e=200-i[0].x;for(let s=0;s<i.length;s++)i[s].x+=e}class v{constructor(t,e,s,n=I(ie,se)){h(this,"x");h(this,"y");h(this,"width");h(this,"height");h(this,"img");h(this,"hasObstacle");h(this,"hasCoins");this.x=t,this.y=e,this.width=n,this.height=s,this.img=null,this.hasObstacle=!1,this.hasCoins=!1}draw(t){this.img=new Image,this.img.src="./platform2.png",t.drawImage(this.img,this.x,this.y-20,this.width,this.height)}}let g=[];const B=()=>{let i=new v(he,T,S,O),t=new v(i.x+i.width+E,T,S,O),e=new v(t.x+t.width+E,T,S,O);g.push(i,t,e)};function ae(){const i=g[g.length-1],t=i?i.x+i.width+E:10;let e=new v(t,T,S);g.push(e)}const ce=()=>{g.length>=5&&g.shift()};function de(){g=[]}class P{constructor(t,e,s,n,r){h(this,"x");h(this,"y");h(this,"width");h(this,"height");h(this,"type");this.x=t,this.y=e,this.width=s,this.height=n,this.type=r}}class A extends P{constructor(e,s,n,r){super(e,s,n,r,"car");h(this,"img");h(this,"type");this.img=new Image,this.img.src="./car.png",this.type="car"}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height)}update(){this.x>400?this.x-=d.x:this.x-=d.x+2}handleCollision(e){return console.log(e.hasPower),!0}}class le extends P{constructor(e,s,n,r){super(e,s,n,r,"bomb");h(this,"img");h(this,"type");this.img=new Image,this.img.src="./bomb.png",this.type="bomb"}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height)}update(){this.x-=d.x}handleCollision(e){return console.log(e.hasPower),!0}}const M=[{x:0,y:0},{x:240,y:0},{x:480,y:0},{x:720,y:0},{x:0,y:240},{x:240,y:240},{x:480,y:240},{x:720,y:240}];class ge extends P{constructor(e,s,n,r){super(e,s,n,r,"insect");h(this,"img");h(this,"frameIndex");h(this,"type");h(this,"frameThreshold");h(this,"frameCounter");this.img=new Image,this.img.src="./butterfly.png",this.frameIndex=0,this.frameThreshold=5,this.frameCounter=0,this.type="insect"}draw(e){const s=M[this.frameIndex];e.drawImage(this.img,s.x,s.y,240,240,this.x,this.y,this.width,this.height),this.frameCounter++,this.frameCounter>=this.frameThreshold&&(this.frameCounter=0,this.frameIndex++,this.frameIndex>=M.length&&(this.frameIndex=0))}update(){this.x-=d.x}handleCollision(e){return e.increaseFrogCount(),!0}}const me=["shield","magnet","speed","jump boost"];class ue extends P{constructor(e,s,n,r,o){super(e,s,n,r,"power");h(this,"img");h(this,"type");h(this,"powerTypeNum");h(this,"powerType");h(this,"powerUpEndTime");this.powerTypeNum=o,this.img=new Image,this.type="power",this.powerType=me[o],this.powerUpEndTime=0}draw(e){this.powerTypeNum==1?(this.powerType="shield",this.img.src="./shield.png"):this.powerTypeNum==2?(this.powerType="magnet",this.img.src="./magnet.png"):this.powerTypeNum==3?(this.powerType="speed",this.img.src="./speed.png"):this.powerTypeNum==4&&(this.powerType="jump boost",this.img.src="./shoes.png"),this.img.onload=()=>{e.drawImage(this.img,this.x,this.y,this.width,this.height)},this.img.complete&&e.drawImage(this.img,this.x,this.y,this.width,this.height)}update(){this.x-=d.x}handleCollision(e){return e.hasPower||(e.hasPower=this.powerType,e.timeForPower()),!0}}class q extends P{constructor(e,s,n,r){super(e,s,n,r,"pushcar");h(this,"img");h(this,"type");h(this,"pushThreshold");h(this,"isPushed");h(this,"tagImg");this.img=new Image,this.img.src="./frogCage.png",this.type="pushCar",this.pushThreshold=1,this.isPushed=!1,this.tagImg=new Image,this.tagImg.src="./cartag.png"}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height),e.drawImage(this.tagImg,this.x-50,this.y-50,this.width,this.height)}update(){this.x-=d.x}handleCollision(e){return console.log(e.hasPower),!0}checkVerticalCollisions(e){for(const s of e)H(s,this)&&s.y+s.height>T-p*2&&s.y+s.height<T-50&&(s.y=this.y-s.height,s.isOnGround=!0,s.speedY=0,s.frameX=0)}checkHorizontalCollisions(e,s){let n=0,r=e[e.length-1];for(const o of e)if(H(o,this))if(n>=this.pushThreshold){b(w,this);const x={x:r.x-40,y:r.y,width:r.width,height:r.height,isOnGround:!0,speedY:0,alive:!0,frameX:0,frameY:0,push:!1};e.push(x),s.score+=1;return}else o.x+o.width<this.x+10&&(n++,o.x=this.x-o.width-.01,o.x+o.width<=0&&b(e,o))}}let w=[];function pe(i){g.forEach(t=>{if(!t.hasObstacle&&t!==g[0]){const e=t.x+I(t.width/6,2*t.width/3),s=t.y-I(100,200);let n,r;const o=Math.random();if(o<.3)r="car",n=new A(e,t.y-p,C,p);else if(o<.7)r="bomb",n=new le(e,s,re,ne);else if(o<.9)r="insect",n=new ge(e,s,L,G);else if(o<1)if(Math.random()<.5)r="pushCar",n=new q(e,t.y-p-10,C,p);else if(i.hasPower)r="car",n=new A(e,t.y-p,C,p);else{r="power";const x=I(1,4);n=new ue(e,s,L,G,x)}else r="car",n=new A(e,t.y-p,C,p);n.type=r,w.push(n),t.hasObstacle=!0}})}function fe(){w.forEach(i=>{i.update()})}function we(i){w.forEach(t=>{t.draw(i)})}function ye(){w=[]}function xe(i){i.clearRect(0,0,a,c);const t=new Image;t.onload=()=>{i.drawImage(t,0,0,a,c)},t.src="./start.jpg",i.fillStyle="white",i.font="30px Arial",i.textAlign="center",i.fillText("Welcome to Your Game",a/2,c/2-50)}function Te(i,t,e){i.clearRect(0,0,a,c);const s=new Image;s.onload=()=>{i.drawImage(s,0,0,a,c),i.font="bold 40px Arial",i.fillStyle="black",i.textAlign="center",i.fillText(`Score: ${t}`,a/2,50),i.fillText(`High Score: ${e}`,a/2,120)},s.src="./end.jpg"}function Ie(i,t){i.font="bold 40px Arial",i.fillStyle="black",i.textAlign="center",i.fillText(`Active Power-up: ${t}`,a/2,30);const e=new Image;switch(t){case"shield":e.src="./shield.png";break;case"magnet":e.src="./magnet.png";break;case"jump boost":e.src="./shoes.png";break;case"speed":e.src="./speed.png";break}i.drawImage(e,a/2-50,100,90,70)}function Pe(i,t){const e=new Image;e.src="./singlecoin.png",i.drawImage(e,40,60,70,60),i.fillStyle="black",i.font="bold 30px Arial",i.fillText(`: ${t.score}`,125,102);const s=new Image;s.src="./froghead.png",i.drawImage(s,40,130,70,60),i.fillText(`: ${t.frogs.length}`,125,165)}const _=new Audio("./frogjump.mp3"),D=new Audio("./bomb.wav"),X=new Audio("./insect.mp3"),k=new Audio("./car.mp3");class K{constructor(t,e){h(this,"frogs");h(this,"game");h(this,"spriteWidth");h(this,"spriteHeight");h(this,"frameX");h(this,"frameY");h(this,"spritePace");h(this,"jumpHeight");h(this,"jumpDuration");h(this,"spacePressed");h(this,"spaceReleasedTimeout");h(this,"hasPower");h(this,"powerUpEndTime");h(this,"isShieldActive");h(this,"isMagnetActive");h(this,"score");h(this,"jumpDelay");this.game=t,this.spriteWidth=ee/12,this.spriteHeight=te/4,this.frameX=1,this.frameY=0,this.spritePace=4,this.jumpHeight=20,this.jumpDuration=3e3,this.spacePressed=!1,this.spaceReleasedTimeout=null,this.hasPower=null,this.powerUpEndTime=0,this.isShieldActive=!1,this.isMagnetActive=!1,this.score=0,this.jumpDelay=75,this.frogs=[];for(let s=0;s<e;s++)this.frogs.push({x:200,y:c-this.game.groundHeight-50-s*20,width:64,height:64,isOnGround:!0,speedY:0,alive:!0,frameX:0,frameY:0});document.addEventListener("keydown",s=>this.handleKeyDown(s)),document.addEventListener("keyup",s=>this.handleKeyUp(s)),document.addEventListener("touchstart",()=>{this.jump()})}update(t){this.frogs.length!==0&&(this.frogs.forEach(e=>{(e.y>c||e.alive==!1)&&b(this.frogs,e)}),this.handlePowerUps(),this.frogs.forEach(e=>{if(e.alive){e.y+=e.speedY;let s=!1;t.forEach(n=>{e.y+e.height>=n.y&&e.y+e.height<=n.y+20&&e.x+e.width-10>=n.x&&e.x<=n.x+n.width+10&&(s=!0,e.speedY=10,e.y>c-20?e.speedY+=this.game.gravity:e.y=n.y-e.height)}),s?e.isOnGround=!0:(e.speedY+=this.game.gravity,e.isOnGround=!1)}}))}draw(t,e){this.frogs.forEach(s=>{s.alive&&(s.isOnGround?s.frameY=0:s.frameY=1,t.drawImage(e,this.spriteWidth*s.frameX,this.spriteHeight*s.frameY,this.spriteWidth,this.spriteHeight,s.x,s.y,this.spriteWidth,this.spriteHeight),this.game.gameFrame%this.spritePace===0&&(s.frameX<11?s.frameX++:s.frameX=0))}),this.hasPower&&Ie(t,this.hasPower)}jump(){this.frogs.length>0&&this.frogs[0].isOnGround&&(_.currentTime=0,_.play()),this.frogs.forEach((t,e)=>{setTimeout(()=>{t.isOnGround&&(t.speedY=-this.jumpHeight,t.isOnGround=!1)},this.jumpDelay*e)})}increaseFrogCount(){const t=this.frogs[this.frogs.length-1];this.frogs.push({x:t.x-50,y:t.y,width:64,height:64,isOnGround:!0,speedY:0,alive:!0,frameX:0,frameY:0})}handleKeyDown(t){t.code==="Space"&&!this.spacePressed&&(this.spacePressed=!0,this.frameY=1,this.jump(),this.spaceReleasedTimeout&&(clearTimeout(this.spaceReleasedTimeout),this.spaceReleasedTimeout=null))}handleKeyUp(t){t.code==="Space"&&(this.spacePressed=!1,this.spaceReleasedTimeout=window.setTimeout(()=>{this.frameY=0,this.spaceReleasedTimeout=null},this.jumpDuration))}checkCollision(t){this.frogs.forEach(e=>{e.alive&&H(e,t)&&(t instanceof q?(t.checkVerticalCollisions(this.frogs),t.checkHorizontalCollisions(this.frogs,this)):(b(w,t),this.frogs.length>0&&oe(this.frogs)),(t.type=="car"||t.type=="bomb")&&(this.isShieldActive||(e.alive=!1,t.type=="bomb"?(D.currentTime=0,D.play()):(k.currentTime=0,k.play()))),t.type=="insect"&&(X.currentTime=0,X.play(),this.increaseFrogCount()),t.type=="power"&&t.handleCollision(this))})}handlePowerUps(){this.hasPower==="speed"&&Date.now()<this.powerUpEndTime?d.x=8:this.hasPower==="jump boost"&&Date.now()<this.powerUpEndTime?this.jumpHeight=30:this.hasPower==="shield"&&Date.now()<this.powerUpEndTime?this.isShieldActive=!0:this.hasPower==="magnet"&&Date.now()<this.powerUpEndTime?this.isMagnetActive=!0:(this.jumpHeight=20,this.isShieldActive=!1,this.jumpDuration=3e3,d.x=6,this.hasPower=null,this.isMagnetActive=!1)}timeForPower(){this.powerUpEndTime=Date.now()+7e3}}const Ce=(i,t,e)=>{const s=document.getElementById(i),n=s.getContext("2d");return s.width=t,s.height=e,{canvas:s,ctx:n}};class Se{constructor(t,e,s,n){h(this,"canvas");h(this,"ctx");h(this,"x");h(this,"y");h(this,"img");this.canvas=t,this.ctx=n,this.x=e,this.y=s,this.img=new Image,this.img.src="./bg2.jpg"}draw(){this.ctx.drawImage(this.img,this.x,this.y,this.canvas.width,c),this.ctx.drawImage(this.img,this.x+a,this.y,a,c)}update(){this.draw(),this.x-=d.x,this.x<=-a&&(this.x=0)}}const U=[{x:7,y:7,width:129,height:130},{x:145,y:4,width:140,height:133},{x:269,y:7,width:91,height:136},{x:48,y:158,width:61,height:145},{x:141,y:158,width:74,height:136},{x:237,y:158,width:118,height:136}];class ve{constructor(t,e,s,n,r){h(this,"x");h(this,"y");h(this,"height");h(this,"width");h(this,"value");h(this,"ctx");h(this,"vx");h(this,"vy");h(this,"frameIndex");h(this,"img");h(this,"frameThreshold");h(this,"frameCounter");h(this,"type");this.x=e,this.y=s,this.width=n,this.height=r,this.ctx=t,this.value=1,this.vx=d.x,this.vy=0,this.img=new Image,this.img.src="./coin.png",this.frameIndex=0,this.frameThreshold=5,this.frameCounter=0,this.type="coin"}draw(){const t=U[this.frameIndex];this.ctx.drawImage(this.img,t.x,t.y,t.width,t.height,this.x,this.y,this.width,this.height),this.frameCounter++,this.frameCounter>=this.frameThreshold&&(this.frameCounter=0,this.frameIndex++,this.frameIndex>=U.length&&(this.frameIndex=0))}update(t){if(t.isMagnetActive&&this.x>0&&this.x<a){let s=t.frogs[0].x-this.x,n=t.frogs[0].y-this.y,r=Math.sqrt(s*s+n*n);if(r>0){let o=s/r,y=n/r;this.x+=o*10,this.y+=y*10}}else this.x-=d.x}detectCollision(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}}let f=[];const W=new Audio("./coin.mp3");function be(i,t){g.forEach((e,s)=>{const n=s%3==0;if(!e.hasCoins&&e!==g[0]&&n){let r=e.x+I(e.width/6,2*e.width/3),o=e.y-I(100,200),y=30,x=40;for(let j=0;j<t;j++){r+=y,o-=x;const $=40,z=40,J=new ve(i,r,o,$,z);f.push(J),y+=5,x+=5}e.hasCoins=!0}})}function Oe(i){f.forEach(t=>{t.update(i)})}function Ae(){f.forEach(i=>{i.draw()})}function Ee(i){for(let t=f.length-1;t>=0;t--){const e=f[t];i.frogs.forEach(s=>{e.detectCollision(s)&&(W.currentTime=0,W.play(),i.score+=1,f.splice(t,1))})}}function He(){f=[]}const u={gameFrame:0,gravity:.8,groundHeight:80,initialHighScore:0,highScore:0},{canvas:Fe,ctx:m}=Ce("canvas1",a,c),V=new Image;V.src="./frog-sheet.png";const N=new Se(Fe,0,0,m);let l=new K(u,1),F=!1;B();const R=document.querySelector("#reset-button");function Y(){if(F){l.score>u.highScore&&(u.highScore=l.score,Ge()),Te(m,l.score,u.highScore),R.style.display="block";return}Le(l.score),u.gameFrame++,m.clearRect(0,0,a,c),N.update(),N.draw(),Pe(m,l),g.forEach(i=>{i.draw(m),i.x-=d.x,i.x+i.width<0&&ae()}),ce(),pe(l),fe(),we(m),be(m,3),Oe(l),Ae(),Ee(l),l.update(g),l.draw(m,V),w.forEach(i=>{l.checkCollision(i),l.frogs.some(t=>t.alive)||(F=!0)}),requestAnimationFrame(Y)}function Re(){m.clearRect(0,0,a,c),m.fillStyle="blue",m.rect(20,20,500,500),F=!1,He(),de(),ye(),l=new K(u,1),B()}function Ye(){Re(),Y()}function je(){const i=localStorage.getItem("highScore");i!==null?u.highScore=parseInt(i,10):u.highScore=u.initialHighScore}function Ge(){localStorage.setItem("highScore",u.highScore.toString())}function Le(i){i>40?d.x=12:i>20&&(d.x=8)}function Me(){je(),xe(m);const i=document.querySelector("#start-button");i.addEventListener("click",()=>{i.style.display="none",Y()}),R.addEventListener("click",()=>{R.style.display="none",Ye()})}Me();
